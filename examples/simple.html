<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
<style>
#map {
	position: absolute;
	top:0;
	left: 0;
	bottom: 0;
	right: 0;
    max-width: 800px;
    background-color: #3ff;
}
.leaflet-layer.blend.darken .leaflet-tile { background-blend-mode: darken !important; }
.leaflet-layer.blend.lighten .leaflet-tile { background-blend-mode: lighten !important; }
.leaflet-layer.blend.color-dodge .leaflet-tile { background-blend-mode: color-dodge !important; }
.leaflet-layer.blend.color-burn .leaflet-tile { background-blend-mode: color-burn !important; }
.leaflet-layer.blend.hard-light .leaflet-tile { background-blend-mode: hard-light !important; }
.leaflet-layer.blend.soft-light .leaflet-tile { background-blend-mode: soft-light !important; }
.leaflet-layer.blend.difference .leaflet-tile { background-blend-mode: difference !important; }
.leaflet-layer.blend.exclusion .leaflet-tile { background-blend-mode: exclusion !important; }
.leaflet-layer.blend.hue .leaflet-tile { background-blend-mode: hue !important; }
.leaflet-layer.blend.saturation .leaflet-tile { background-blend-mode: saturation !important; }
.leaflet-layer.blend.color .leaflet-tile { background-blend-mode: color !important; }
.leaflet-layer.blend.luminosity .leaflet-tile { background-blend-mode: luminosity !important; }
#mode_wrap {
    padding: 4px;
    border-radius: 2px;
    background:#fff;
}
</style>
</head>

<body>

<div id="mode_wrap">
<select id="mode">
    <option>normal</option>
    <option>multiply</option>
    <option>screen</option>
    <option selected="selected">overlay</option>
    <option>darken</option>
    <option>lighten</option>
    <option>color-dodge</option>
    <option>color-burn</option>
    <option>hard-light</option>
    <option>soft-light</option>
    <option>difference</option>
    <option>exclusion</option>
    <option>hue</option>
    <option>saturation</option>
    <option>color</option>
    <option>luminosity</option>
</select>
</div>

<div id="map">
</div>

<script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"></script>
<script src="https://unpkg.com/underscore@1.9.1/underscore.js"></script>
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
<script src="../src/leaflet-tilelayer-blend.js"></script>
<script>

var map = L.map('map', {
		//crs: L.CRS.EPSG4326,
		zoom: 11,
		maxBounds: [[-90, -180], [90, 180]],
		minZoom: 3,
		noWrap:true,
		center: [46.063583647141385, 11.147003173828125]
	});

var base = L.tileLayer('https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png', {
        maxZoom: 18,
        zIndex: 10,
        attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });

var hill = L.tileLayer('https://tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png', {
        maxZoom: 15,
        zIndex: 1,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });

var blend = new L.TileLayer.Blend([base, hill], {
    //className: 'blend',
    blendMode: $('#mode').val()
});//.addTo(map);


var baseLayers = {
	//	'OpenStreetMap': L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map)
	},
	overlays = {
        'Hydda Base': base,
        'HikeBike HillShading': hill,
        'Tilelayer Blend': blend
	};

$('#mode').on('change', function(e) {
	var c = $(this).val();
	$('.leaflet-layer.blend').removeClass().addClass('leaflet-layer blend '+c)
});

L.control.layers(baseLayers, overlays, {
	position: 'topright',
	collapsed: false
}).addTo(map);

map.addControl(
    (function() {
        var control = new L.Control({position:'topright'});
        control.onAdd = function(map) {
                return $('#mode_wrap')[0];
                //return adown;
            };
        return control;
    }())
);
  

</script> 
</body>
</html>
